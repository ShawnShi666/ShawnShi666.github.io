<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="C#,Web API,编码规范," />










<meta name="description" content="Web API 编写规范【持续更新】">
<meta name="keywords" content="C#,Web API,编码规范">
<meta property="og:type" content="article">
<meta property="og:title" content="Web API 编写规范(C#)">
<meta property="og:url" content="http://shixiaohe.online/2017/12/25/Web-API-编写规范-C/index.html">
<meta property="og:site_name" content="Shawn&#39;s blog">
<meta property="og:description" content="Web API 编写规范【持续更新】">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2017-12-25T12:54:13.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Web API 编写规范(C#)">
<meta name="twitter:description" content="Web API 编写规范【持续更新】">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://shixiaohe.online/2017/12/25/Web-API-编写规范-C/"/>





  <title>Web API 编写规范(C#) | Shawn's blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?3edd9647956c0fd7c020d69a72a3f1fd";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Shawn's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">世界辣么繁华，我想粗去溜达.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://shixiaohe.online/2017/12/25/Web-API-编写规范-C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shawn Shi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shawn's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Web API 编写规范(C#)</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-25T20:38:15+08:00">
                2017-12-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NET/" itemprop="url" rel="index">
                    <span itemprop="name">.NET</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/12/25/Web-API-编写规范-C/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/12/25/Web-API-编写规范-C/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/12/25/Web-API-编写规范-C/" class="leancloud_visitors" data-flag-title="Web API 编写规范(C#)">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Web-API-编写规范【持续更新】"><a href="#Web-API-编写规范【持续更新】" class="headerlink" title="Web API 编写规范【持续更新】"></a>Web API 编写规范【持续更新】</h1><a id="more"></a>
<p>@(<a href="http://www.shixiaohe.online)[Web" target="_blank" rel="noopener">http://www.shixiaohe.online)[Web</a> API|帮助|C#]</p>
<hr>
<h2 id="1-概念"><a href="#1-概念" class="headerlink" title="(1) 概念"></a>(1) 概念</h2><h3 id="1-什么是-web-api"><a href="#1-什么是-web-api" class="headerlink" title="1.什么是 web api"></a>1.什么是 web api</h3><p><strong>[以下仅为个人理解，如有疑义，可以共同讨论]</strong></p>
<p>官方定义如下，强调两个关键点，即可以对接各种客户端（浏览器，移动设备），构建http服务的框架。</p>
<blockquote>
<p>ASP.NET Web API is a framework th<a href="media/14980123522855/Web-API-%E7%BC%96%E5%86%99%E8%A7%84%E8%8C%83-C.md">Web-API-编写规范-</a>at makes it easy to build HTTP services that reach a broad range of clients, including browsers and mobile devices. ASP.NET Web API is an ideal platform for building RESTful applications on the .NET Framework.</p>
</blockquote>
<h3 id="2-URI-与-URL"><a href="#2-URI-与-URL" class="headerlink" title="2.URI 与 URL"></a>2.URI 与 URL</h3><ul>
<li>URI(Uniform Resource Identifiers) 统一资源标示符</li>
<li>URL(Uniform Resource Locator) 统一资源定位符</li>
</ul>
<h2 id="2-域名"><a href="#2-域名" class="headerlink" title="(2) 域名"></a>(2) 域名</h2><p> 应该尽量将API部署在专用域名之下。</p>
<pre><code>http(s)://{ProjectName}.{Terminal}.service.com

例如: http(s)://tsp.api.service.com
</code></pre><h2 id="3-版本"><a href="#3-版本" class="headerlink" title="(3) 版本"></a>(3) 版本</h2><p>应该将API的版本号放入URL。</p>
<pre><code>例如：http(s)://tsp.api.service.com/v1.0/
</code></pre><blockquote>
<p>始终要对自己的API进行版本控制。版本控制可以帮助你更快的迭代，并且可以防止无效的请求访问新的API。这还可以帮助你平滑过渡任何大版本的升级，在这个过程中你还可以继续提供老版本的API一段时间。</p>
<p>API的版本信息究竟是应该包含在URL里边还是header里边，围绕着这个目前存在分歧。从学术上来讲，版本信息应该放在header里边。但是为了保证能够通过浏览器去浏览资源的不同版本，版本信息应该放在URL里边</p>
</blockquote>
<h2 id="4-路径（URI）格式规范"><a href="#4-路径（URI）格式规范" class="headerlink" title="(4) 路径（URI）格式规范"></a>(4) 路径（URI）格式规范</h2><h3 id="1-关于分隔符“-”的使用"><a href="#1-关于分隔符“-”的使用" class="headerlink" title="1. 关于分隔符“/”的使用"></a>1. 关于分隔符“/”的使用</h3><p>“/“分隔符一般用来对资源层级的划分，</p>
<pre><code>例如 http://tsp.api.service.com/shapes/polygons/quadrilaterals/squares

shapes（形状）；polygons（多边形）；quadrilaterals（四边形）；squares（正方形）
</code></pre><blockquote>
<p>对于REST API来说，”/“只是一个分隔符，并无其他含义。为了避免混淆，”/“不应该出现在URL的末尾。例如以下两个地址实际表示的都是同一个资源：</p>
</blockquote>
<pre><code>http(s)://tsp.api.service.com/shapes/  
http(s)://tsp.api.service.com/shapes
</code></pre><h3 id="2-URI中尽量使用连字符”-“代替下划线”-”的使用"><a href="#2-URI中尽量使用连字符”-“代替下划线”-”的使用" class="headerlink" title="2.  URI中尽量使用连字符”-“代替下划线”_”的使用"></a>2.  URI中尽量使用连字符”-“代替下划线”_”的使用</h3><p>连字符”-“一般用来分割URI中出现的字符串(单词)，来提高URI的可读性，例如：<br>http(s)://tsp.api.service.com/blogs/mark-masse/entries/this-is-my-first-post  </p>
<p>使用下划线”<em>“来分割字符串(单词)可能会和链接的样式冲突重叠，而影响阅读性。但实际上，”-“和”</em>“对URL中字符串的分割语意上还是有些差异的：”-“分割的字符串(单词)一般各自都具有独立的含义，可参见上面的例子。而”_”一般用于对一个整体含义的字符串做了层级的分割，方便阅读，例如你想在URL中体现一个ip地址的信息：210_110_25_88 .</p>
<h3 id="3-URI中统一使用小写字母"><a href="#3-URI中统一使用小写字母" class="headerlink" title="3.  URI中统一使用小写字母"></a>3.  URI中统一使用小写字母</h3><blockquote>
<p>根据RFC3986定义，URI是对大小写敏感的，所以为了避免歧义，我们尽量用小写字符。但主机名(Host)和scheme（协议名称:http/ftp/…）对大小写是不敏感的。</p>
</blockquote>
<h3 id="4-体现资源并非动作："><a href="#4-体现资源并非动作：" class="headerlink" title="4.  体现资源并非动作："></a>4.  体现资源并非动作：</h3><p>URI 片段中尽量使用名词、避免使用动词，因为动作应该通过 <strong><code>GET/POST/PUT/DELETE</code></strong>… 来表述。</p>
<h3 id="5-复数资源与单资源【统一】"><a href="#5-复数资源与单资源【统一】" class="headerlink" title="5.  复数资源与单资源【统一】"></a>5.  复数资源与单资源【<code>统一</code>】</h3><table>
<thead>
<tr>
<th style="text-align:left">动作</th>
<th style="text-align:left">路由</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">POST</td>
<td style="text-align:left">/animals</td>
<td style="text-align:left">创建一个新的资源</td>
</tr>
<tr>
<td style="text-align:left">GET</td>
<td style="text-align:left">/animals</td>
<td style="text-align:left">获取所有资源</td>
</tr>
<tr>
<td style="text-align:left">PUT</td>
<td style="text-align:left">/animals?id=12</td>
<td style="text-align:left">获取单个资源</td>
</tr>
<tr>
<td style="text-align:left">DELETE</td>
<td style="text-align:left">/animals?id=12</td>
<td style="text-align:left">删除单个资源</td>
</tr>
</tbody>
</table>
<h3 id="6-参数的设计允许存在冗余-不建议"><a href="#6-参数的设计允许存在冗余-不建议" class="headerlink" title="6. 参数的设计允许存在冗余(不建议)"></a>6. 参数的设计允许存在冗余(<code>不建议</code>)</h3><p>不允许API路径和URL参数有重复</p>
<blockquote>
<p> 例如：GET <code>/zoo/ID/animals</code> 与 GET <code>/zoo/ID/animals?zoo-id=ID</code> 的含义是相同的。</p>
<p><code>原因</code>：路由中用的  <code>ID</code>  参数 , 与  <code>zoo-id</code> 都代表  zoo 的主键值，调用接口的人员，要传两遍值, 无形当中会带来困扰和工作量.</p>
<p><code>不建议</code>以上例子中的第一种方式（在 URI 中以占位符的方式传参，建议第二种方式，但是 api 文档一定要标注）</p>
</blockquote>
<h3 id="7-根路由的名称要跟控制器保持一致"><a href="#7-根路由的名称要跟控制器保持一致" class="headerlink" title="7.  根路由的名称要跟控制器保持一致"></a>7.  根路由的名称要跟控制器保持一致</h3><blockquote>
<p><code>理由:</code> 后期维护时，根据 URI 找接口代码时，根据根路由名称就能找到，方便维护</p>
</blockquote>
<h2 id="5-HTTP-动词"><a href="#5-HTTP-动词" class="headerlink" title="(5) HTTP 动词"></a>(5) HTTP 动词</h2><table>
<thead>
<tr>
<th style="text-align:left">动作</th>
<th style="text-align:left">作用</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">GET</td>
<td style="text-align:left">选择（常用）</td>
<td style="text-align:left">从服务器上获取<code>单个</code>具体的资源或者一个<code>资源列表</code>。</td>
</tr>
<tr>
<td style="text-align:left">POST</td>
<td style="text-align:left">创建（推荐用）</td>
<td style="text-align:left">在服务器上<code>创建新的资源</code>。</td>
</tr>
<tr>
<td style="text-align:left">PUT</td>
<td style="text-align:left">更新（推荐用）</td>
<td style="text-align:left">以<code>整体</code>的方式更新服务器上的资源。</td>
</tr>
<tr>
<td style="text-align:left">PATCH</td>
<td style="text-align:left">更新（常用）</td>
<td style="text-align:left">只更新服务器上<code>单个资源/资源集合</code>的<code>部分属性</code>。</td>
</tr>
<tr>
<td style="text-align:left">DELETE</td>
<td style="text-align:left">删除（常用）</td>
<td style="text-align:left">删除服务器上的<code>单个/资源集合</code>。</td>
</tr>
<tr>
<td style="text-align:left">HEAD</td>
<td style="text-align:left">获取（不常用）</td>
<td style="text-align:left">获取一个资源的元数据，如数据的哈希值或最后的更新时间。</td>
</tr>
<tr>
<td style="text-align:left">OPTIONS</td>
<td style="text-align:left">获取（不常用）</td>
<td style="text-align:left">获取客户端能对资源做什么操作的信息。</td>
</tr>
</tbody>
</table>
<h2 id="6-模型验证"><a href="#6-模型验证" class="headerlink" title="(6) 模型验证"></a>(6) 模型验证</h2><p><strong><code>针对 POST 请求，需要对字段的，必填，长度，格式（手机号，邮箱）等进行校验</code></strong></p>
<h2 id="7-状态码-Status-Codes"><a href="#7-状态码-Status-Codes" class="headerlink" title="(7) 状态码(Status Codes)"></a>(7) 状态码(Status Codes)</h2><h3 id="1-注意事项："><a href="#1-注意事项：" class="headerlink" title="1. 注意事项："></a>1. 注意事项：</h3><p>不允许手动返回状态码，</p>
<pre><code>例如： StatusCode = &quot;200&quot;;
</code></pre><p>正确的写法</p>
<pre><code>例如： StatusCode = HttpStatusCode.OK;
</code></pre><h3 id="2-状态码总结："><a href="#2-状态码总结：" class="headerlink" title="2. 状态码总结："></a>2. 状态码总结：</h3><pre><code>#region 程序集 System.dll, v4.0.0.0
// C:\Program Files (x86)\Reference         Assemblies\Microsoft\Framework\.NETFramework\v4.5\System.dll
#endregion

using System;

namespace System.Net
{
    // 摘要: 
    //     包含为 HTTP 定义的状态代码的值。
    public enum HttpStatusCode
    {
        // 摘要: 
        // 等效于 HTTP 状态 100。 
        // System.Net.HttpStatusCode.Continue 指示客户端可能继续其请求。
        Continue = 100,
        //
        // 摘要: 
        // 等效于 HTTP 状态 101。 
        // System.Net.HttpStatusCode.SwitchingProtocols 指示正在更改协议版本或协议。
        SwitchingProtocols = 101,
        //
        // 摘要: 
        // 等效于 HTTP 状态 200。 
        // System.Net.HttpStatusCode.OK 指示请求成功，且请求的信息包含在响应中。 
        // 这是最常接收的状态代码。
        OK = 200,
        //
        // 摘要: 
        // 等效于 HTTP 状态 201。 
        // System.Net.HttpStatusCode.Created 指示请求导致在响应被发送前创建新资源。
        Created = 201,
        //
        // 摘要: 
        // 等效于 HTTP 状态 202。 
        // System.Net.HttpStatusCode.Accepted 指示请求已被接受做进一步处理。
        Accepted = 202,
        //
        // 摘要: 
        // 等效于 HTTP 状态 203。 
        // System.Net.HttpStatusCode.NonAuthoritativeInformation 
        // 指示返回的元信息来自缓存副本而不是原始服务器，因此可能不正确。
        NonAuthoritativeInformation = 203,
        //
        // 摘要: 
        // 等效于 HTTP 状态 204。 
        // System.Net.HttpStatusCode.NoContent 
        // 指示已成功处理请求并且响应已被设定为无内容。
        NoContent = 204,
        //
        // 摘要: 
        // 等效于 HTTP 状态 205。 
        // System.Net.HttpStatusCode.ResetContent 
        // 指示客户端应重置（或重新加载）当前资源。
        ResetContent = 205,
        //
        // 摘要: 
        // 等效于 HTTP 状态 206。 
        // System.Net.HttpStatusCode.PartialContent 指示响应是包括字节范围的 GET
        // 请求所请求的部分响应。
        PartialContent = 206,
        //
        // 摘要: 
        // 等效于 HTTP 状态 300。 
        // System.Net.HttpStatusCode.MultipleChoices 指示请求的信息有多种表示形式。
        // 默认操作是将此状态视为重定向，并遵循与此响应关联的 Location 标头的内容。
        MultipleChoices = 300,
        //
        // 摘要: 
        // 等效于 HTTP 状态 300。 System.Net.HttpStatusCode.Ambiguous 
        // 指示请求的信息有多种表示形式。 
        // 默认操作是将此状态视为重定向，并遵循与此响应关联的
        // Location 标头的内容。
        Ambiguous = 300,
        //
        // 摘要: 
        // 等效于 HTTP 状态 301。 
        // System.Net.HttpStatusCode.MovedPermanently 
        // 指示请求的信息已移到 Location
        // 头中指定的 URI 处。 接收到此状态时的默认操作为遵循与响应关联的 Location 头。
        MovedPermanently = 301,
        //
        // 摘要: 
        // 等效于 HTTP 状态 301。 
        // System.Net.HttpStatusCode.Moved 指示请求的信息已移到 Location 头中指定的
        // URI 处。 接收到此状态时的默认操作为遵循与响应关联的 Location 头。 
        // 原始请求方法为 POST 时，重定向的请求将使用 GET 方法。
        Moved = 301,
        //
        // 摘要: 
        // 等效于 HTTP 状态 302。 
        // System.Net.HttpStatusCode.Found 指示请求的信息位于 Location 头中指定的
        // URI 处。 接收到此状态时的默认操作为遵循与响应关联的 Location 头。 
        // 原始请求方法为 POST 时，重定向的请求将使用 GET 方法。
        Found = 302,
        //
        // 摘要: 
        // 等效于 HTTP 状态 302。 
        // System.Net.HttpStatusCode.Redirect 
        // 指示请求的信息位于 Location 头中指定的
        // URI 处。 接收到此状态时的默认操作为遵循与响应关联的 Location 头。 
        // 原始请求方法为 POST 时，重定向的请求将使用 GET 方法。
        Redirect = 302,
        //
        // 摘要: 
        // 等效于 HTTP 状态 303。 作为 POST 的结果，
        // System.Net.HttpStatusCode.SeeOther 将客户端自动重定向到
        // Location 头中指定的 URI。 用 GET 生成对 Location 标头所指定的资源的请求。
        SeeOther = 303,
        //
        // 摘要: 
        // 等效于 HTTP 状态 303。 作为 POST 的结果，
        // System.Net.HttpStatusCode.RedirectMethod 将客户端自动重定向到
        // Location 头中指定的 URI。 用 GET 生成对 Location 标头所指定的资源的请求。
        RedirectMethod = 303,
        //
        // 摘要: 
        // 等效于 HTTP 状态 304。 System.Net.HttpStatusCode.NotModified 
        // 指示客户端的缓存副本是最新的。 未传输此资源的内容。
        NotModified = 304,
        //
        // 摘要: 
        // 等效于 HTTP 状态 305。 System.Net.HttpStatusCode.UseProxy 
        // 指示请求应使用位于 Location 头中指定的
        // URI 的代理服务器。
        UseProxy = 305,
        //
        // 摘要: 
        // 等效于 HTTP 状态 306。 
        // System.Net.HttpStatusCode.Unused 
        // 是未完全指定的 HTTP/1.1 规范的建议扩展。
        Unused = 306,
        //
        // 摘要: 
        // 等效于 HTTP 状态 307。 
        // System.Net.HttpStatusCode.RedirectKeepVerb 指示请求信息位于 Location
        // 头中指定的 URI 处。 接收到此状态时的默认操作为遵循与响应关联的 Location 头。 
        // 原始请求方法为 POST 时，重定向的请求还将使用
        // POST 方法。
        RedirectKeepVerb = 307,
        //
        // 摘要: 
        // 等效于 HTTP 状态 307。 
        // System.Net.HttpStatusCode.TemporaryRedirect 指示请求信息位于 Location
        // 头中指定的 URI 处。 接收到此状态时的默认操作为遵循与响应关联的 Location 头。
        // 原始请求方法为 POST 时，重定向的请求还将使用
        // POST 方法。
        TemporaryRedirect = 307,
        //
        // 摘要: 
        // 等效于 HTTP 状态 400。 
        // System.Net.HttpStatusCode.BadRequest 指示服务器未能识别请求。 
        // 如果没有其他适用的错误，或者不知道准确的错误或错误没有自己的错误代码，则发送
        // System.Net.HttpStatusCode.BadRequest。
        BadRequest = 400,
        //
        // 摘要: 
        // 等效于 HTTP 状态 401。 
        // System.Net.HttpStatusCode.Unauthorized 
        // 指示请求的资源要求身份验证。 WWW-Authenticate
        // 头包含如何执行身份验证的详细信息。
        Unauthorized = 401,
        //
        // 摘要: 
        // 等效于 HTTP 状态 402。 
        // 保留 System.Net.HttpStatusCode.PaymentRequired 以供将来使用。
        PaymentRequired = 402,
        //
        // 摘要: 
        // 等效于 HTTP 状态 403。 
        // System.Net.HttpStatusCode.Forbidden 指示服务器拒绝满足请求。
        Forbidden = 403,
        //
        // 摘要: 
        // 等效于 HTTP 状态 404。 
        // System.Net.HttpStatusCode.NotFound 指示请求的资源不在服务器上。
        NotFound = 404,
        //
        // 摘要: 
        // 等效于 HTTP 状态 405。 
        // System.Net.HttpStatusCode.MethodNotAllowed 
        // 指示请求的资源上不允许请求方法（POST 或 GET）。
        MethodNotAllowed = 405,
        //
        // 摘要: 
        // 等效于 HTTP 状态 406。 
        // System.Net.HttpStatusCode.NotAcceptable 
        // 指示客户端已用 Accept 头指示将不接受资源的任何可用表示形式。
        NotAcceptable = 406,
        //
        // 摘要: 
        // 等效于 HTTP 状态 407。 
        // System.Net.HttpStatusCode.ProxyAuthenticationRequired 
        // 指示请求的代理要求身份验证。
        // Proxy-authenticate 头包含如何执行身份验证的详细信息。
        ProxyAuthenticationRequired = 407,
        //
        // 摘要: 
        // 等效于 HTTP 状态 408。 
        // System.Net.HttpStatusCode.RequestTimeout 
        // 指示客户端没有在服务器期望请求的时间内发送请求。
        RequestTimeout = 408,
        //
        // 摘要: 
        // 等效于 HTTP 状态 409。 
        // System.Net.HttpStatusCode.Conflict 指示由于服务器上的冲突而未能执行请求。
        Conflict = 409,
        //
        // 摘要: 
        // 等效于 HTTP 状态 410。 
        // System.Net.HttpStatusCode.Gone 指示请求的资源不再可用。
        Gone = 410,
        //
        // 摘要: 
        // 等效于 HTTP 状态 411。 
        // System.Net.HttpStatusCode.LengthRequired 
        // 指示缺少必需的 Content-length 头。
        LengthRequired = 411,
        //
        // 摘要: 
        // 等效于 HTTP 状态 412。 
        // System.Net.HttpStatusCode.PreconditionFailed 
        // 指示为此请求设置的条件失败，且无法执行此请求。
        // 条件是用条件请求标头
        //（如 If-Match、If-None-Match 或 If-Unmodified-Since）设置的。
        PreconditionFailed = 412,
        //
        // 摘要: 
        // 等效于 HTTP 状态 413。 
        // System.Net.HttpStatusCode.RequestEntityTooLarge 
        // 指示请求太大，服务器无法处理。
        RequestEntityTooLarge = 413,
        //
        // 摘要: 
        // 等效于 HTTP 状态 414。 
        // System.Net.HttpStatusCode.RequestUriTooLong 指示 URI 太长。
        RequestUriTooLong = 414,
        //
        // 摘要: 
        // 等效于 HTTP 状态 415。 
        // System.Net.HttpStatusCode.UnsupportedMediaType 指示请求是不支持的类型。
        UnsupportedMediaType = 415,
        //
        // 摘要: 
        // 等效于 HTTP 状态 416。 
        // System.Net.HttpStatusCode.RequestedRangeNotSatisfiable 
        // 指示无法返回从资源请求的数据范围，因为范围的开头在资源的开头之前，
        // 或因为范围的结尾在资源的结尾之后。
        RequestedRangeNotSatisfiable = 416,
        //
        // 摘要: 
        // 等效于 HTTP 状态 417。 
        // System.Net.HttpStatusCode.ExpectationFailed 
        // 指示服务器未能符合 Expect
        // 头中给定的预期值。
        ExpectationFailed = 417,
        //
        UpgradeRequired = 426,
        //
        // 摘要: 
        // 等效于 HTTP 状态 500。 
        // System.Net.HttpStatusCode.InternalServerError 
        // 指示服务器上发生了一般错误。
        InternalServerError = 500,
        //
        // 摘要: 
        // 等效于 HTTP 状态 501。 
        // System.Net.HttpStatusCode.NotImplemented 指示服务器不支持请求的函数。
        NotImplemented = 501,
        //
        // 摘要: 
        // 等效于 HTTP 状态 502。 
        // System.Net.HttpStatusCode.BadGateway 
        // 指示中间代理服务器从另一代理或原始服务器接收到错误响应。
        BadGateway = 502,
        //
        // 摘要: 
        // 等效于 HTTP 状态 503。 
        // System.Net.HttpStatusCode.ServiceUnavailable 
        // 指示服务器暂时不可用，通常是由于过多加载或维护。
        ServiceUnavailable = 503,
        //
        // 摘要: 
        // 等效于 HTTP 状态 504。 
        // System.Net.HttpStatusCode.GatewayTimeout 
        // 指示中间代理服务器在等待来自另一个代理或原始服务器的响应时已超时。
        GatewayTimeout = 504,
        //
        // 摘要: 
        // 等效于 HTTP 状态 505。 
        // System.Net.HttpStatusCode.HttpVersionNotSupported 
        // 指示服务器不支持请求的
        // HTTP 版本。
        HttpVersionNotSupported = 505,
    }
}

Http状态码
</code></pre><h2 id="8-错误处理"><a href="#8-错误处理" class="headerlink" title="(8) 错误处理"></a>(8) 错误处理</h2><p>如果状态码是4xx，就应该向用户返回出错信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error: &quot;Invalid API key&quot;</span><br></pre></td></tr></table></figure>
<h2 id="9-返回结果"><a href="#9-返回结果" class="headerlink" title="(9) 返回结果"></a>(9) 返回结果</h2><h3 id="1-动作-》结果"><a href="#1-动作-》结果" class="headerlink" title="1. 动作 ==》结果"></a>1. 动作 ==》结果</h3><blockquote>
<p><code>GET /collection</code>：返回资源对象的列表（数组）</p>
<p><code>GET /collection/resource</code>：返回单个资源对象</p>
<p><code>POST /collection</code>：返回新生成的资源对象</p>
<p><code>PUT /collection/resource</code>：返回完整的资源对象</p>
<p><code>PATCH /collection/resource</code>：返回完整的资源对象</p>
<p><code>DELETE /collection/resource</code>：返回一个空文档</p>
</blockquote>
<h3 id="2-返回数据格式"><a href="#2-返回数据格式" class="headerlink" title="2. 返回数据格式"></a>2. 返回数据格式</h3><blockquote>
<p>统一使用 <strong><code>Json</code></strong> 字符串</p>
</blockquote>
<pre><code>例如：
    {
        code: 200,
        message: &quot;信息提示&quot;,
        data: {
            id: 11,
            name: &quot;king&quot;
        }
    }
</code></pre><h3 id="3-返回字段约束"><a href="#3-返回字段约束" class="headerlink" title="3. 返回字段约束"></a>3. 返回字段约束</h3><blockquote>
<p>返回的数据中的字段名称万万不能直接将数据库中的字段直接返回.</p>
<p><code>例如：</code> 数据库中字段名：User_Name, 返回的字段应为：username（自己看着命名即可）<br><code>理由：</code> 防止数据库字段微调时影响手机端。</p>
</blockquote>
<p><code>code</code> 根据上文状态码进行返回，不同错误对应不同的状态吗</p>
<p><code>message</code> 提示信息要进行统一，根据不同情况，写入 BaseController 类中</p>
<p><code>data</code> data可以是JSON对象也可以是JSON数组，具体看业务需求。但要保证在不同情况下data的类型是一致的。<br>例如：data在有数据的时候是列表，那么在没有数据的时候应该是空列表而不是字符串。<br>此规范不仅仅是适用于data，同样适用于其他数据字段。</p>
<h3 id="4-特殊字段排除"><a href="#4-特殊字段排除" class="headerlink" title="4. 特殊字段排除"></a>4. 特殊字段排除</h3><p>返回的 Json 数据中不可包含以下关键字</p>
<p><strong><code>IOS:</code></strong></p>
<blockquote>
<p>属性关键字</p>
<p><code>copy</code>, <code>assign</code>, <code>strong</code>, <code>retain</code>, <code>weak</code>, <code>readonly</code>, <code>readwrite</code>, <code>nonatomic</code>, <code>atomic</code>, <code>class</code>, <code>typename</code></p>
<p>数据类型关键字</p>
<p><code>const</code>, <code>int</code>, <code>bool</code>, <code>BOOL</code>, <code>char</code>, <code>double</code>, <code>float</code>, <code>long</code>, <code>short</code>, <code>static</code>, <code>long long</code>, <code>signed</code>, <code>unsigned</code>, <code>YES</code>, <code>NO</code>, <code>nil</code>, <code>NULL</code>, <code>id</code>,<code>instancetype</code></p>
<p>常用语法关键字</p>
<p><code>break</code>, <code>continue</code>, <code>return</code>, <code>do</code>, <code>while</code>, <code>if</code>, <code>else</code>, <code>for</code>, <code>instanceof</code>, <code>switch</code>, <code>case</code>, <code>default</code>, <code>try</code>, <code>goto</code>, <code>new</code></p>
<p>中函数关键字</p>
<p><code>super</code>, <code>this</code>, <code>void</code>, <code>IBAction</code>, <code>nullable</code>, <code>typedef</code>, <code>NS_ENUM</code>, <code>self</code></p>
</blockquote>
<p><strong><code>Android：</code></strong></p>
<blockquote>
<p><code>private</code>, <code>protected</code>, <code>public</code></p>
<p><code>abstract</code>, <code>class</code>, <code>extends</code>, <code>final</code>, <code>implements</code></p>
<p><code>interface</code>,<code>native</code>, <code>new</code>, <code>static</code>, <code>strictfp</code></p>
<p><code>synchronized</code>, <code>transient</code>, <code>volatile</code></p>
<p><code>break</code>, <code>continue</code>, <code>return</code>, <code>do</code>, <code>while</code>, <code>if</code>, <code>else</code>, <code>for</code>, <code>instanceof</code>, <code>switch</code>, <code>case</code>, <code>default</code></p>
<p><code>catch</code>, <code>finally</code>, <code>throw</code>, <code>throws</code>, <code>try</code></p>
<p><code>import</code>, <code>package</code></p>
<p><code>boolean</code>, <code>byte</code>, <code>char</code>, <code>double</code>, <code>float</code>, <code>int</code>, <code>long</code>, <code>short</code></p>
<p><code>super</code>, <code>this</code>, <code>void</code>, <code>goto</code>, <code>null</code></p>
</blockquote>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="Shawn Shi 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="Shawn Shi 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/C/" rel="tag"># C#</a>
          
            <a href="/tags/Web-API/" rel="tag"># Web API</a>
          
            <a href="/tags/编码规范/" rel="tag"># 编码规范</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/12/23/hello-world/" rel="next" title="Hello World">
                <i class="fa fa-chevron-left"></i> Hello World
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/12/26/My-SQL-卸载-安装-For-Windows/" rel="prev" title="My SQL 卸载 & 安装 For Windows">
                My SQL 卸载 & 安装 For Windows <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.png"
                alt="Shawn Shi" />
            
              <p class="site-author-name" itemprop="name">Shawn Shi</p>
              <p class="site-description motion-element" itemprop="description">技术改变未来.</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/shawnshi666" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://weibo.com/5800759008/profile?topnav=1&wvr=6&is_all=1" target="_blank" title="微博">
                    
                      <i class="fa fa-fw fa-globe"></i>微博</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Web-API-编写规范【持续更新】"><span class="nav-number">1.</span> <span class="nav-text">Web API 编写规范【持续更新】</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-概念"><span class="nav-number">1.1.</span> <span class="nav-text">(1) 概念</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-什么是-web-api"><span class="nav-number">1.1.1.</span> <span class="nav-text">1.什么是 web api</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-URI-与-URL"><span class="nav-number">1.1.2.</span> <span class="nav-text">2.URI 与 URL</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-域名"><span class="nav-number">1.2.</span> <span class="nav-text">(2) 域名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-版本"><span class="nav-number">1.3.</span> <span class="nav-text">(3) 版本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-路径（URI）格式规范"><span class="nav-number">1.4.</span> <span class="nav-text">(4) 路径（URI）格式规范</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-关于分隔符“-”的使用"><span class="nav-number">1.4.1.</span> <span class="nav-text">1. 关于分隔符“/”的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-URI中尽量使用连字符”-“代替下划线”-”的使用"><span class="nav-number">1.4.2.</span> <span class="nav-text">2.  URI中尽量使用连字符”-“代替下划线”_”的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-URI中统一使用小写字母"><span class="nav-number">1.4.3.</span> <span class="nav-text">3.  URI中统一使用小写字母</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-体现资源并非动作："><span class="nav-number">1.4.4.</span> <span class="nav-text">4.  体现资源并非动作：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-复数资源与单资源【统一】"><span class="nav-number">1.4.5.</span> <span class="nav-text">5.  复数资源与单资源【统一】</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-参数的设计允许存在冗余-不建议"><span class="nav-number">1.4.6.</span> <span class="nav-text">6. 参数的设计允许存在冗余(不建议)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-根路由的名称要跟控制器保持一致"><span class="nav-number">1.4.7.</span> <span class="nav-text">7.  根路由的名称要跟控制器保持一致</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-HTTP-动词"><span class="nav-number">1.5.</span> <span class="nav-text">(5) HTTP 动词</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-模型验证"><span class="nav-number">1.6.</span> <span class="nav-text">(6) 模型验证</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-状态码-Status-Codes"><span class="nav-number">1.7.</span> <span class="nav-text">(7) 状态码(Status Codes)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-注意事项："><span class="nav-number">1.7.1.</span> <span class="nav-text">1. 注意事项：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-状态码总结："><span class="nav-number">1.7.2.</span> <span class="nav-text">2. 状态码总结：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-错误处理"><span class="nav-number">1.8.</span> <span class="nav-text">(8) 错误处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-返回结果"><span class="nav-number">1.9.</span> <span class="nav-text">(9) 返回结果</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-动作-》结果"><span class="nav-number">1.9.1.</span> <span class="nav-text">1. 动作 ==》结果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-返回数据格式"><span class="nav-number">1.9.2.</span> <span class="nav-text">2. 返回数据格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-返回字段约束"><span class="nav-number">1.9.3.</span> <span class="nav-text">3. 返回字段约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-特殊字段排除"><span class="nav-number">1.9.4.</span> <span class="nav-text">4. 特殊字段排除</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Shawn Shi</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  









  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three-waves.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  

    
      <script id="dsq-count-scr" src="https://.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://shixiaohe.online/2017/12/25/Web-API-编写规范-C/';
          this.page.identifier = '2017/12/25/Web-API-编写规范-C/';
          this.page.title = 'Web API 编写规范(C#)';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  





  












  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("WmNV9t542HVVRtrmrN26S6bK-gzGzoHsz", "uwzt4fjYjjstLC4y3Vlqg1Pk");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>
